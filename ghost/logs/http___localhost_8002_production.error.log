{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:40.782Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:41.586Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:42.604Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:43.815Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:45.771Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:48.207Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:52.314Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":500,"domain":"http://localhost:8002","code":"ECONNREFUSED","name":"InternalServerError","statusCode":500,"level":"critical","message":"connect ECONNREFUSED 172.18.0.2:3306","help":"\"Unknown database error\"","stack":"DatabaseError: connect ECONNREFUSED 172.18.0.2:3306\n    at DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:64:32)\n    at DatabaseError.KnexMigrateError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:7:26)\n    at new DatabaseError (/var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/errors.js:55:26)\n    at /var/lib/ghost/versions/4.44.0/node_modules/knex-migrator/lib/database.js:57:19\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)\n    at async DatabaseStateManager.getState (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:40:13)\n    at async DatabaseStateManager.makeReady (/var/lib/ghost/versions/4.44.0/core/server/data/db/state-manager.js:73:25)\n    at async initDatabase (/var/lib/ghost/versions/4.44.0/core/boot.js:69:5)\n    at async bootGhost (/var/lib/ghost/versions/4.44.0/core/boot.js:412:9)\n\nError: connect ECONNREFUSED 172.18.0.2:3306\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"connect ECONNREFUSED 172.18.0.2:3306","time":"2022-04-28T13:44:59.693Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":"72e8ab90-c6f9-11ec-90aa-d1dc4782a663","domain":"http://localhost:8002","code":"IMAGE_SIZE_URL","name":"InternalServerError","statusCode":500,"level":"critical","message":"Unknown Request error.","context":"\"http://localhost:8002/favicon.ico\"","stack":"Error: connect ECONNREFUSED 127.0.0.1:8002\n    at /var/lib/ghost/versions/4.44.0/core/server/lib/image/image-size.js:192:35\n    at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1159:16)","hideStack":false},"msg":"Unknown Request error.","time":"2022-04-28T13:45:21.867Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"req":{"meta":{"requestId":"06a7acf4-b935-4654-8d1d-6264f4f0b290","userId":null},"url":"/users/me/?include=roles","method":"GET","originalUrl":"/ghost/api/admin/users/me/?include=roles","params":{},"headers":{"host":"localhost:8002","connection":"keep-alive","sec-ch-ua":"\" Not A;Brand\";v=\"99\", \"Chromium\";v=\"100\", \"Google Chrome\";v=\"100\"","dnt":"1","sec-ch-ua-mobile":"?0","app-pragma":"no-cache","user-agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/100.0.4896.127 Safari/537.36","content-type":"application/json; charset=UTF-8","accept":"application/json, text/javascript, */*; q=0.01","x-requested-with":"XMLHttpRequest","x-ghost-version":"4.44","sec-ch-ua-platform":"\"macOS\"","sec-fetch-site":"same-origin","sec-fetch-mode":"cors","sec-fetch-dest":"empty","referer":"http://localhost:8002/ghost/","accept-encoding":"gzip, deflate, br","accept-language":"en,en-US;q=0.9"},"query":{"include":"roles"}},"res":{"_headers":{"x-powered-by":"Express","cache-control":"no-cache, private, no-store, must-revalidate, max-stale=0, post-check=0, pre-check=0","content-type":"application/json; charset=utf-8","content-length":"321","etag":"W/\"141-2GUb00uv4XoeIbLc9tLnoXq1lFU\"","vary":"Accept-Encoding"},"statusCode":403,"responseTime":"137ms"},"err":{"id":"7e87ad20-c6f9-11ec-90aa-d1dc4782a663","domain":"http://localhost:8002","code":null,"name":"NoPermissionError","statusCode":403,"level":"normal","message":"Authorization failed","context":"\"Unable to determine the authenticated user or integration. Check that cookies are being passed through if using session authentication.\"","stack":"NoPermissionError: Authorization failed\n    at authorizeAdminApi (/var/lib/ghost/versions/4.44.0/core/server/services/auth/authorize.js:33:25)\n    at Layer.handle [as handle_request] (/var/lib/ghost/versions/4.44.0/node_modules/express/lib/router/layer.js:95:5)\n    at next (/var/lib/ghost/versions/4.44.0/node_modules/express/lib/router/route.js:137:13)\n    at authenticate (/var/lib/ghost/versions/4.44.0/core/server/services/auth/session/middleware.js:28:13)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)","hideStack":false},"msg":"Authorization failed","time":"2022-04-28T13:45:41.366Z","v":0}
{"name":"Log","hostname":"a4c18dd890f7","pid":1,"level":50,"err":{"id":"734db980-c6fa-11ec-90aa-d1dc4782a663","domain":"http://localhost:8002","code":null,"name":"EmailError","statusCode":500,"level":"normal","message":"Failed to send email. Reason: Email has been temporarily rejected.","context":"\"Unable to send welcome email, your site will continue to function.\"","help":"\"Please see https://ghost.org/docs/config/#mail for instructions on configuring email.\"","stack":"EmailError: Failed to send email. Reason: Email has been temporarily rejected.\n    at createMailError (/var/lib/ghost/versions/4.44.0/core/server/services/mail/GhostMailer.js:67:12)\n    at GhostMailer.handleDirectTransportResponse (/var/lib/ghost/versions/4.44.0/core/server/services/mail/GhostMailer.js:140:19)\n    at GhostMailer.send (/var/lib/ghost/versions/4.44.0/core/server/services/mail/GhostMailer.js:116:25)\n    at runMicrotasks (<anonymous>)\n    at processTicksAndRejections (internal/process/task_queues.js:95:5)","hideStack":false},"msg":"Failed to send email. Reason: Email has been temporarily rejected.","time":"2022-04-28T13:52:32.081Z","v":0}
